MooTools.More={version:"1.3.2.1",build:"e586bcd2496e9b22acfde32e12f84d49ce09e59d"};Class.Mutators.Binds=function(a){if(!this.prototype.initialize){this.implement("initialize",function(){});
}return Array.from(a).concat(this.prototype.Binds||[]);};Class.Mutators.initialize=function(a){return function(){Array.from(this.Binds).each(function(b){var c=this[b];
if(c){this[b]=c.bind(this);}},this);return a.apply(this,arguments);};};Events.Pseudos=function(g,c,e){var b="monitorEvents:";var a=function(h){return{store:h.store?function(i,j){h.store(b+i,j);
}:function(i,j){(h.$monitorEvents||(h.$monitorEvents={}))[i]=j;},retrieve:h.retrieve?function(i,j){return h.retrieve(b+i,j);}:function(i,j){if(!h.$monitorEvents){return j;
}return h.$monitorEvents[i]||j;}};};var f=function(j){if(j.indexOf(":")==-1||!g){return null;}var i=Slick.parse(j).expressions[0][0],m=i.pseudos,h=m.length,k=[];
while(h--){if(g[m[h].key]){k.push({event:i.tag,value:m[h].value,pseudo:m[h].key,original:j});}}return k.length?k:null;};var d=function(h){return Object.merge.apply(this,h.map(function(i){return g[i.pseudo].options||{};
}));};return{addEvent:function(m,p,j){var n=f(m);if(!n){return c.call(this,m,p,j);}var k=a(this),s=k.retrieve(m,[]),h=n[0].event,t=d(n),o=p,i=t[h]||{},l=Array.slice(arguments,2),r=this,q;
if(i.args){l.append(Array.from(i.args));}if(i.base){h=i.base;}if(i.onAdd){i.onAdd(this);}n.each(function(u){var v=o;o=function(){(i.listener||g[u.pseudo].listener).call(r,u,v,arguments,q,t);
};});q=o.bind(this);s.include({event:p,monitor:q});k.store(m,s);c.apply(this,[m,p].concat(l));return c.apply(this,[h,q].concat(l));},removeEvent:function(l,n){var m=f(l);
if(!m){return e.call(this,l,n);}var j=a(this),o=j.retrieve(l);if(!o){return this;}var h=m[0].event,p=d(m),i=p[h]||{},k=Array.slice(arguments,2);if(i.args){k.append(Array.from(i.args));
}if(i.base){h=i.base;}if(i.onRemove){i.onRemove(this);}e.apply(this,[l,n].concat(k));o.each(function(q,r){if(!n||q.event==n){e.apply(this,[h,q.monitor].concat(k));
}delete o[r];},this);j.store(l,o);return this;}};};(function(){var b={once:{listener:function(e,f,d,c){f.apply(this,d);this.removeEvent(e.event,c).removeEvent(e.original,f);
}},throttle:{listener:function(d,e,c){if(!e._throttled){e.apply(this,c);e._throttled=setTimeout(function(){e._throttled=false;},d.value||250);}}},pause:{listener:function(d,e,c){clearTimeout(e._pause);
e._pause=e.delay(d.value||250,this,c);}}};Events.definePseudo=function(c,d){b[c]=Type.isFunction(d)?{listener:d}:d;return this;};Events.lookupPseudo=function(c){return b[c];
};var a=Events.prototype;Events.implement(Events.Pseudos(b,a.addEvent,a.removeEvent));["Request","Fx"].each(function(c){if(this[c]){this[c].implement(Events.prototype);
}});})();(function(){var d={},c=["once","throttle","pause"],b=c.length;while(b--){d[c[b]]=Events.lookupPseudo(c[b]);}Event.definePseudo=function(e,f){d[e]=Type.isFunction(f)?{listener:f}:f;
return this;};var a=Element.prototype;[Element,Window,Document].invoke("implement",Events.Pseudos(d,a.addEvent,a.removeEvent));})();(function(){var b=!(window.attachEvent&&!window.addEventListener),f=Element.NativeEvents;
f.focusin=2;f.focusout=2;var c=function(h,k,i){var j=Element.Events[h.event],l;if(j){l=j.condition;}return Slick.match(k,h.value)&&(!l||l.call(k,i));};
var e=function(h,j,i){for(var k=j.target;k&&k!=this;k=document.id(k.parentNode)){if(k&&c(h,k,j)){return i.call(k,j,k);}}};var g=function(h){var i="$delegation:";
return{base:"focusin",onRemove:function(j){j.retrieve(i+"forms",[]).each(function(k){k.retrieve(i+"listeners",[]).each(function(l){k.removeEvent(h,l);});
k.eliminate(i+h+"listeners").eliminate(i+h+"originalFn");});},listener:function(r,s,q,t,v){var k=q[0],j=this.retrieve(i+"forms",[]),p=k.target,m=(p.get("tag")=="form")?p:k.target.getParent("form");
if(!m){return;}var o=m.retrieve(i+"originalFn",[]),l=m.retrieve(i+"listeners",[]),u=this;j.include(m);this.store(i+"forms",j);if(!o.contains(s)){var n=function(w){e.call(u,r,w,s);
};m.addEvent(h,n);o.push(s);l.push(n);m.store(i+h+"originalFn",o).store(i+h+"listeners",l);}}};};var a=function(h){return{base:"focusin",listener:function(l,m,j){var k={blur:function(){this.removeEvents(k);
}},i=this;k[h]=function(n){e.call(i,l,n,m);};j[0].target.addEvents(k);}};};var d={mouseenter:{base:"mouseover"},mouseleave:{base:"mouseout"},focus:{base:"focus"+(b?"":"in"),args:[true]},blur:{base:b?"blur":"focusout",args:[true]}};
if(!b){Object.append(d,{submit:g("submit"),reset:g("reset"),change:a("change"),select:a("select")});}Event.definePseudo("relay",{listener:function(i,j,h){e.call(this,i,h[0],j);
},options:d});})();

var MooGrid=new Class({Implements:Options,Binds:["parseData_Xml","parseData_Json","alignColumns","syncScrolls","simulateMouseScroll","initResizeGrid","initResizeColumn","sortColumn","selectRange","clearTextSelections"],options:{noCache:true,allowGridResize:false,allowColumnResize:false,allowClientSideSorting:false,allowSelections:false,allowMultipleSelections:false,supportMultipleGridsInView:false,fixedCols:0,scrollLeftTo:0,srcType:"",xml_remote:"",xml_local:"",json_remote:"",json_local:{},selectedBgColor:"#fef7dc",fixedSelectedBgColor:"#f4eccd",colBGColors:[],colSortTypes:[],customSortCleaner:null},Css:{idRulePrefix:"",sheet:null,rules:{}},columns:0,lastSortedColumn:-1,rawData:[],selectedIndexes:[],cellData:{head:[],body:[],foot:[]},cache:{},initialize:function(b,a){this.element=document.id(b);this.setOptions(a);this.generateSkeleton()},generateSkeleton:function(){this.parentDimensions=this.element.getSize();this.docFrag=document.createDocumentFragment();this.base=new Element("DIV",{"class":"mgBase"});this.docFrag.appendChild(this.base);this.head=new Element("DIV",{"class":"mgHead"}).inject(this.base);this.headFixed=new Element("DIV",{"class":"mgHeadFixed"}).inject(this.head);this.headStatic=new Element("DIV",{"class":"mgHeadStatic"}).inject(this.head);this.foot=new Element("DIV",{"class":"mgFoot"}).inject(this.base);this.footFixed=new Element("DIV",{"class":"mgFootFixed"}).inject(this.foot);this.footStatic=new Element("DIV",{"class":"mgFootStatic"}).inject(this.foot);this.body=new Element("DIV",{"class":"mgBody"}).inject(this.base);this.bodyFixed=new Element("DIV",{"class":"mgBodyFixed"}).inject(this.body);this.bodyFixed2=new Element("DIV",{"class":"mgBodyFixed2"}).inject(this.bodyFixed);this.bodyStatic=new Element("DIV",{"class":"mgBodyStatic"}).inject(this.body);if(this.options.fixedCols>0&&!Browser.ie){this.bodyFixed.addEvent("mousewheel",this.simulateMouseScroll)}if(this.options.allowGridResize){this.baseResize=new Element("DIV",{"class":"mgBaseResize",events:{mousedown:this.initResizeGrid}}).inject(this.base)}if(this.options.allowColumnResize){this.head.addEvent("mousedown:relay(.mgRS)",this.initResizeColumn)}if(this.options.allowClientSideSorting){this.head.addEvent("mousedown:relay(.mgHR)",this.sortColumn)}if(this.options.allowSelections||this.options.allowMultipleSelections){this.options.allowSelections=true;this.body.addEvent("mousedown:relay(.mgBR)",this.selectRange)}switch(this.options.srcType){case"xml_remote":new Request({url:this.options.xml_remote,onComplete:this.parseData_Xml,noCache:this.options.noCache}).get();break;case"xml_local":var a=null;if(Browser.ie){a=new ActiveXObject("Microsoft.XMLDOM");a.async=false;a.loadXML(this.options.xml_local)}else{a=new DOMParser().parseFromString(this.options.xml_local,"text/xml")}this.parseData_Xml(this.options.xml_local,a);break;case"json_remote":new Request.JSON({url:this.options.json_remote,onComplete:this.parseData_Json,noCache:this.options.noCache,secure:false}).get();break;case"json_local":this.parseData_Json(this.options.json_local,"");break;default:this.parseData();break}},parseData_Xml:function(b,c){var a=(!!c)?c.getElementsByTagName("grid")[0]:null;if(!!a){this.convertData_Xml({Head:a.getElementsByTagName("head")[0],Body:a.getElementsByTagName("body")[0],Foot:a.getElementsByTagName("foot")[0]})}this.parseData()},convertData_Xml:function(a){var c=a.Head||a.Body||a.Foot||null,e=this.options.allowColumnResize,b,d;if(!c){return}this.columns=d=c.getElementsByTagName("row")[0].getElementsByTagName("cell").length;while(d){this.cellData.head[--d]=[];this.cellData.body[d]=[];this.cellData.foot[d]=[]}d=this.columns;if(!!a.Head){b=a.Head.getElementsByTagName("row");this.convertDataItem_Xml(this.cellData.head,b,"<DIV class='mgC mgHR mgR",this.columns,e,false)}else{this.Css.rules[".mgHead"]={display:"none"}}if(!!a.Body){b=a.Body.getElementsByTagName("row");this.convertDataItem_Xml(this.cellData.body,b,"<DIV class='mgC mgBR mgR",this.columns,false,true)}else{this.Css.rules[".mgBodyFixed"]={display:"none"}}if(!!a.Foot){b=a.Foot.getElementsByTagName("row");this.convertDataItem_Xml(this.cellData.foot,b,"<DIV class='mgC mgFR mgR",this.columns,false,false)}else{this.Css.rules[".mgFoot"]={display:"none"}}},convertDataItem_Xml:function(f,l,e,d,b,c){var m=(Browser.Engine.trident)?"text":"textContent",h=l.length,i,k,j,g,a;while(h){i=e+(--h)+"'>";j=l[h].getElementsByTagName("cell");a=d;if(c){this.rawData[h]=g=[]}while(a){k=j[--a][m];f[a][h]=i+(k||"&nbsp;");if(c){g[a]=k}}if(b){a=d;while(a){f[--a][h]=("<SPAN class='mgRS mgRS"+a+"'>&nbsp;</SPAN>")+f[a][h]}}}},parseData_Json:function(b,a){if(typeOf(b)==="object"){this.rawData=b.Body||[];this.convertData_Json(b)}this.parseData()},convertData_Json:function(a){var b=a.Head||a.Body||a.Foot||null,d=this.options.allowColumnResize,c;if(!b){return}this.columns=c=b[0].length;while(c){this.cellData.head[--c]=[];this.cellData.body[c]=[];this.cellData.foot[c]=[]}c=this.columns;if(!!a.Head){this.convertDataItem_Json(this.cellData.head,a.Head,"<DIV class='mgC mgHR mgR",this.columns,d)}else{this.Css.rules[".mgHead"]={display:"none"}}if(!!a.Body){this.convertDataItem_Json(this.cellData.body,a.Body,"<DIV class='mgC mgBR mgR",this.columns,false)}else{this.Css.rules[".mgBodyFixed"]={display:"none"}}if(!!a.Foot){this.convertDataItem_Json(this.cellData.foot,a.Foot,"<DIV class='mgC mgFR mgR",this.columns,false)}else{this.Css.rules[".mgFoot"]={display:"none"}}},convertDataItem_Json:function(f,i,e,c,b){var g=i.length,h,d,a;while(g){h=e+(--g)+"'>";d=i[g];a=c;while(a){f[--a][g]=h+(d[a]||"&nbsp;")}if(b){a=c;while(a){f[--a][g]=("<SPAN class='mgRS mgRS"+a+"'>&nbsp;</SPAN>")+f[a][g]}}}},parseData:function(){this.generateGrid();this.lastScrollLeft=0;this.lastScrollTop=0;this.body.addEvent("scroll",this.syncScrolls);if(!!$(this.element.id+"SS")){this.Css.sheet=$(this.element.id+"SS").dispose()}else{this.Css.sheet=new Element("STYLE",{id:this.element.id+"SS",type:"text/css"})}this.element.appendChild(this.docFrag);if(this.options.scrollLeftTo>0){this.body.scrollLeft=this.options.scrollLeftTo}if(!Browser.ie7&&!Browser.ie8){this.alignColumns(false)}else{window.setTimeout(this.alignColumns.pass(false),25)}},generateGrid:function(){this.hasHead=(this.cellData.head.length>0&&this.cellData.head[0].length>0);this.hasBody=(this.cellData.body.length>0&&this.cellData.body[0].length>0);this.hasFoot=(this.cellData.foot.length>0&&this.cellData.foot[0].length>0);this.hasFixedCols=(this.options.fixedCols>0);this.generateGridHead();this.generateGridBody();this.generateGridFoot()},generateGridHead:function(){var a;if(this.hasHead){a=this.generateGridItem(this.cellData.head);this.headStatic.innerHTML=a.fullHTML;if(this.hasFixedCols){this.headFixed.innerHTML=a.fixedHTML}}},generateGridBody:function(){var a;if(this.hasBody){a=this.generateGridItem(this.cellData.body);this.bodyStatic.innerHTML=a.fullHTML;if(this.hasFixedCols){this.bodyFixed2.innerHTML=a.fixedHTML}}else{this.bodyStatic.innerHTML="<DIV class='mgEmptySetMsg'>No results returned.</DIV>"}},generateGridFoot:function(){var a;if(this.hasFoot){a=this.generateGridItem(this.cellData.foot);this.footStatic.innerHTML=a.fullHTML;if(this.hasFixedCols){this.footFixed.innerHTML=a.fixedHTML}}},generateGridItem:function(c){var f=this.options.fixedCols,a=c.length,e=/@/,b=[],d=[];while(a){a--;if(a<f){b[a]=("<DIV class='mgCl mgCl"+a+" mgFCl'>@</DIV></DIV>").replace(e,c[a].join("</DIV>"));d[a]="<DIV class='mgCl mgCl"+a+" mgFCl'></DIV>"}else{d[a]=("<DIV class='mgCl mgCl"+a+"'>@</DIV></DIV>").replace(e,c[a].join("</DIV>"))}}return{fixedHTML:b.join(""),fullHTML:d.join("")}},alignColumns:function(g){if(this.columns===0){return}var l=this.options.fixedCols,a=this.options.allowColumnResize,f=this.options.colBGColors,b=f.length,m=this.Css.rules,h,c;this.columnWidths=[];this.colIndex=0;this.colNodes={head:this.headStatic.children,body:this.bodyStatic.children,foot:this.footStatic.children};this.fixedColNodes=(l>0)?{head:this.headFixed.children,body:this.bodyFixed2.children,foot:this.footFixed.children}:null;if(g===true){for(var j=0;j<this.columns;j++){delete m[".mgCl"+j].width}this.setRules()}else{h=(this.hasHead)?this.head.offsetHeight:0;c=(this.hasFoot)?this.foot.offsetHeight:0;this.scrollBarSize=this.body.offsetWidth-this.body.clientWidth;m[".mgC"]={visibility:"visible"};m[".mgCl"]={"background-color":"#fff"};m[".mgBodyStatic"]={padding:h+"px 0px "+c+"px 0px"};if(this.hasHead){m[".mgHead"]={right:this.scrollBarSize+"px"}}if(this.hasFoot){m[".mgFoot"]={bottom:this.scrollBarSize+"px",right:this.scrollBarSize+"px"}}if(this.hasFixedCols){m[(!Browser.ie7)?".mgBodyFixed":".mgBodyFixed2"]={top:h+"px",bottom:this.scrollBarSize+"px"}}if(a){m[".mgRS"]={display:"block",position:"relative"};m[".mgResizeDragger"]={bottom:this.scrollBarSize+"px"}}}while(true){var d=(this.colIndex<l)?this.fixedColNodes:this.colNodes,k=[d.head[this.colIndex],d.body[this.colIndex],d.foot[this.colIndex]],e=Math.max((!!k[0])?k[0].offsetWidth:0,(!!k[1])?k[1].offsetWidth:0,(!!k[2])?k[2].offsetWidth:0);this.columnWidths[this.colIndex]=e;m[".mgCl"+this.colIndex]={width:e+"px"};if(b>this.colIndex&&f[this.colIndex]!=="#ffffff"){m[".mgCl"+this.colIndex]["background-color"]=f[this.colIndex]}if(a){m[".mgRS"+this.colIndex]={"margin-left":(e-2)+"px"}}this.colIndex++;if(this.colIndex===this.columns){break}}this.colNodes=null;this.fixedColNodes=null;this.setRules()},syncScrolls:function(){if(this.hasHead||this.hasFoot){var b=this.body.scrollLeft;if(b!==this.lastScrollLeft){if(this.hasHead){this.headStatic.setStyle("margin-left",-1*b)}if(this.hasFoot){this.footStatic.setStyle("margin-left",-1*b)}this.lastScrollLeft=b}}if(this.hasFixedCols){var a=this.body.scrollTop;if(a!==this.lastScrollTop){this.bodyFixed2.setStyle("margin-top",-1*this.body.scrollTop);this.lastScrollTop=a}}},simulateMouseScroll:function(a){this.body.scrollTop-=(a.wheel*100);this.syncScrolls()},setRules:function(){var c="",g=this.Css.sheet,k=this.Css.rules,b=[],f=[],e=0,d=0;if(this.options.supportMultipleGridsInView){c=(this.Css.idRulePrefix!=="")?this.Css.idRulePrefix:"#"+this.element.id+" "}for(var h in k){d=0;f=[];for(var a in k[h]){f[d++]=a+":"+k[h][a]+";"}if(d>0){b[e++]=c+h+"{"+((d===1)?f[0]:f.join(""))+"}"}}if(!$(g.id+"SS")){g.inject(document.head)}if(Browser.ie){g.styleSheet.cssText=b.join(" ")}else{g.set("text",b.join(" "))}},initResizeGrid:function(a){this.ResizeInfo={origX:a.page.x,origY:a.page.y,origWidth:this.parentDimensions.x,origHeight:this.parentDimensions.y,boundMouseMove:this.resizeGrid.bind(this),boundMouseUp:this.endResizeGrid.bind(this)};document.addEvents({mousemove:this.ResizeInfo.boundMouseMove,mouseup:this.ResizeInfo.boundMouseUp});a.stop();return false},resizeGrid:function(e){var c=e.page.x-this.ResizeInfo.origX,a=e.page.y-this.ResizeInfo.origY,d=(c>=0)?this.ResizeInfo.origWidth+c:this.ResizeInfo.origWidth-(-1*c),b=(a>=0)?this.ResizeInfo.origHeight+a:this.ResizeInfo.origHeight-(-1*a);d=(d<50)?50:d;b=(b<25)?25:b;this.element.setStyles({width:d,height:b});this.parentDimensions={x:d,y:b};this.syncScrolls();this.clearTextSelections()},endResizeGrid:function(a){document.removeEvents({mousemove:this.ResizeInfo.boundMouseMove,mouseup:this.ResizeInfo.boundMouseUp})},initResizeColumn:function(b){var c=$(b.target),a=c.get("class").replace(/mgRS/g,"").toInt();this.ResizeInfo={resizer:c,lPos:c.offsetLeft,cIndex:a,origWidth:this.columnWidths[a],origX:b.client.x,lastLeft:-1,newWidth:this.columnWidths[a],boundMouseMove:this.resizeColumn.bind(this),boundMouseUp:this.endResizeColumn.bind(this)};this.ResizeInfo.dragger=new Element("DIV",{"class":"mgResizeDragger",styles:{left:this.ResizeInfo.lPos}}).inject(this.base,"top");document.addEvents({mousemove:this.ResizeInfo.boundMouseMove,mouseup:this.ResizeInfo.boundMouseUp});b.stop();return false},resizeColumn:function(d){var a=d.client.x-this.ResizeInfo.origX,c=(a>=0)?this.ResizeInfo.origWidth+a:this.ResizeInfo.origWidth-(-1*a),c=(c<15)?15:c,b=(a>=0)?this.ResizeInfo.lPos+a:this.ResizeInfo.lPos-(-1*a);this.ResizeInfo.newWidth=c;if(this.ResizeInfo.lastLeft!==b&&c>15){this.ResizeInfo.dragger.setStyle("left",b);this.ResizeInfo.lastLeft=b}this.clearTextSelections()},endResizeColumn:function(a){document.removeEvents({mousemove:this.ResizeInfo.boundMouseMove,mouseup:this.ResizeInfo.boundMouseUp});this.ResizeInfo.dragger.dispose();this.Css.rules[".mgCl"+this.ResizeInfo.cIndex]["width"]=this.ResizeInfo.newWidth+"px";this.Css.rules[".mgRS"+this.ResizeInfo.cIndex]["margin-left"]=(this.ResizeInfo.newWidth-2)+"px";this.setRules();this.syncScrolls();this.columnWidths[this.ResizeInfo.cIndex]=this.ResizeInfo.newWidth},sortColumn:function(d,b){var a=/mgCl(\d+)/.exec(b.getParent(".mgCl").get("class"))[1].toInt(),f=this.options.colSortTypes[a]||"string",f=(a===this.lastSortedColumn)?"reverse":f,e={hasSelections:(this.options.allowSelections&&this.selectedIndexes.length>0)},g=this.rawData,c=this;if(!this.hasBody||f==="none"){return}e.index=g.length;e.storeAt=g[0].length;while(e.index){g[--e.index][e.storeAt]=e.index}if(e.hasSelections){e.selIndexes=this.selectedIndexes.concat();this.selectAll("unselectAll")}if(f==="reverse"){g.reverse()}else{g.sort(function(i,h){return c.getSortResult(f,a,i[a],h[a])})}this.convertDataItem_Json(this.cellData.body,g,"<DIV class='mgC mgBR mgR",this.columns,false);this.generateGridBody();e.newOrder=[];e.index=g.length;while(e.index){e.newOrder[--e.index]=g[e.index][e.storeAt];g[e.index].splice(e.storeAt,1)}this.head.fireEvent("columnSort",[(f==="reverse"),e.newOrder.concat(),b,a]);this.lastSortedColumn=a;if(e.hasSelections){e.newSelIndexes=[];e.index=e.selIndexes.length;while(e.index){e.newSelIndexes[--e.index]=e.newOrder.indexOf(e.selIndexes[e.index])}this.selectIndexes(e.newSelIndexes)}},getSortResult:function(h,g,f,d,e,c){if(f===d){return 0}e=h+"_"+f;c=h+"_"+d;if(this.cache[e]===undefined){this.cache[e]=(h==="string")?f:(h==="number")?parseFloat(f)||-Infinity:(h==="date")?new Date(f).getTime()||-Infinity:(h==="custom")?this.options.customSortCleaner(f,g):f}if(this.cache[c]===undefined){this.cache[c]=(h==="string")?d:(h==="number")?parseFloat(d)||-Infinity:(h==="date")?new Date(d).getTime()||-Infinity:(h==="custom")?this.options.customSortCleaner(d,g):d}return(this.cache[e]<this.cache[c])?-1:1},selectIndexes:function(c){var e=[],b=0,f=this.selectedIndexes;for(var d=0,a=c.length;d<a;d++){if(!f.contains(c[d])){e[b++]=c[d]}}this.toggleRows(e,[]);this.selectedIndexes.combine(e);this.body.fireEvent("rowSelect",[e,[],null,-1])},selectRange:function(a,j){if(a.rightClick){return}var k=/mgR(\d+)/.exec(j.get("class"))[1].toInt(),g=[],b=[],m,n=0,l=this.selectedIndexes,f=l.contains(k),c=(a.control||(a.target.type||"").toLowerCase()==="checkbox"),d=a.shift;if(!this.options.allowMultipleSelections||this.selectedIndexes.length===0||(!d&&!c)){g=(f&&l.length===1)?[]:[k];b=l.concat()}else{if(c){g=f?[]:[k];b=f?[k]:[]}else{if(d){m=l[0];if(m<=k){for(var e=m+1;e<=k;e++){if(l.indexOf(e)===-1){g[n++]=e}}}else{for(var e=m-1;e>=k;e--){if(l.indexOf(e)===-1){g[n++]=e}}}}}}this.toggleRows(g,b);for(var e=0,h=b.length;e<h;e++){this.selectedIndexes.erase(b[e])}this.selectedIndexes.combine(g);if(c||d){window.setTimeout(this.clearTextSelections,25)}this.body.fireEvent("rowSelect",[g,b,a.target,k])},selectAll:function(a){var f=[],e=[],d=0,g=this.selectedIndexes,c=(this.hasBody)?this.bodyStatic.children[this.options.fixedCols].children.length-1:0;if(a==="selectAll"){for(var b=0;b<=c;b++){if(g.indexOf(b)===-1){f[d++]=b}}this.selectedIndexes.combine(f)}else{e=this.selectedIndexes.concat();this.selectedIndexes=[]}this.toggleRows(f,e);this.body.fireEvent("rowSelect",[f,e,null,-1])},toggleRows:function(f,a){var k=this.options.fixedCols,m=this.options.selectedBgColor,e=this.options.fixedSelectedBgColor,j=this.bodyStatic.children,g=(k>0)?this.bodyFixed2.children:[],c=f.length,i=a.length,d,h,b,l;if(k>0){b=k;while(b){l=g[--b].children;h=i;d=c;while(h){l[a[--h]].style.backgroundColor=""}while(d){l[f[--d]].style.backgroundColor=e}}}b=this.columns;while(b>k){l=j[--b].children;h=i;d=c;while(h){l[a[--h]].style.backgroundColor=""}while(d){l[f[--d]].style.backgroundColor=m}}},clearTextSelections:function(){if(!!window.getSelection){this.clearTextSelections=function(){window.getSelection().removeAllRanges();return false}}else{if(!!document.selection){this.clearTextSelections=function(){document.selection.empty();return false}}else{this.clearTextSelections=function(){return false}}}this.clearTextSelections()},cleanUp:function(b){var a=this.element.id;this.base.removeEvents();this.head.removeEvents();this.body.removeEvents();this.bodyFixed.removeEvents();this.element=null;this.docFrag=null;this.base=null;this.head=null;this.headFixed=null;this.headStatic=null;this.body=null;this.bodyFixed=null;this.bodyFixed2=null;this.bodyStatic=null;this.foot=null;this.footFixed=null;this.footStatic=null;this.baseResize=null;if(!!this.ResizeInfo){this.ResizeInfo.dragger=null}if(b){this.Css.sheet=null;if(!!$(a+"SS")){$(a+"SS").dispose()}}}});